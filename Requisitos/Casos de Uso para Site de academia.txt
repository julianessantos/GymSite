Casos de Uso para App Comanda Digital (diagrama)

Ator 1: Cliente
Abrir Conta
Fluxo normal:
1 - Cliente informa nome 
2 - Cliente informa CPF
3 - Cliente informa número da Mesa
4 - Garçom autoriza abertura de conta
5 - Sistema abre uma conta para o cliente na mesa solicitada
Extensões:
2a - Se CPF for inválido, solicitar novo CPF
3a - Se número da mesa for inválida, solicitar novo número da mesa
Chamar Garçom
Fluxo normal:
1 - Cliente solicita a presença do garçom
2 - Sistema verifica token
3 - Sistema notifica o garçom
Extensões:
2a - Se o token estiver inválido, o sistema deve informar o erro ao cliente 
Fazer Pedido
Fluxo normal:
1 - Cliente escolhe o item
2 - Sistema verifica token
3 - Sistema verifica disponibilidade do item no estoque
4 - Pedido é adicionado ao Sistema
Extensões:
2a - Se o token estiver inválido, o sistema deve informar o erro ao cliente 
4a - Se item for comida, o sistema deve adicionar pedido à fila da Cozinha
4b - Se item for bebida, o sistema deve adicionar pedido à fila do Bar
Pagar Conta
Fluxo normal:
1 - Cliente solicita o custo do consumo da mesa
2 - Cliente seleciona opção de pagamento
3 - Sistema ou Garçom processa pagamento
4 - Sistema encerra a conta
5 - Sistema remove token
Extensões:
2a - Se opção for dinheiro, Sistema notifica o Garçom para receber o dinheiro
2b - Se opção for PIX, Sistema apresenta QR Code 
2c - Se opção for Cartão de Crédito, Sistema apresenta opções de notificar o Garçom para passar o cartão ou inserir os dados do cartão no aplicativo
2d - Se opção for Cartão de Débito, Sistema apresenta opções de notificar o Garçom para passar o cartão ou inserir os dados do cartão no aplicativo


Ator 2: Garçom
Autenticar Usuário
Fluxo normal:
1 - Usuário fornece login e senha
2 - Sistema gera token para o usuário
Extensões:
1a - Se login e senha não forem válidos, o Sistema deve informar o erro ao usuário e solicitar as informações novamente


Autorizar Abertura de Conta
Pré-condição: estar autenticado
Fluxo normal:
1 - Sistema verifica token do Garçom
2 - Garçom verifica se o nome do cliente está correto na solicitação (interagindo com o mesmo)
3 - Garçom solicita geração de token para o cliente ao Sistema
4 - Sistema abre conta para conta para o cliente
Extensões:
2a - Se o nome estiver incorreto, o próprio garçom corrige
Atender Pedido do Bar
Fluxo normal:
1 - Garçom seleciona e remove o próximo pedido da Fila do Bar
2 - Garçom leva o pedido à mesa
3 - Sistema adiciona o pedido à Conta
Cancelar Pedido do Bar
Fluxo normal:
1 - Garçom seleciona Conta
2 - Sistema apresenta todos os pedidos do Bar relacionados àquela Conta 
3 - Garçom seleciona e remove o pedido
Cancelar Pedido da Cozinha
Fluxo normal:
1 - Garçom seleciona Conta
2 - Sistema apresenta todos os pedidos da Cozinha relacionados àquela Conta  
3 - Garçom seleciona e remove o pedido


Ator 3: Cozinheiro
Autenticar Usuário
Fluxo normal:
1 - Usuário fornece login e senha
2 - Sistema gera token para o usuário
Extensões:
1a - Se login e senha não forem válidos, o Sistema deve informar o erro ao usuário e solicitar as informações novamente
Atender Pedido da Cozinha
Fluxo normal:
1 - Cozinheiro seleciona e remove o próximo pedido da Fila da Cozinha
2 - Cozinheiro prepara o pedido
3 - Cozinheiro adiciona pedido à Fila do Bar com Prioridade Alta


Ator 4: Gerente
Adicionar Item ao Cardápio
Fluxo normal:
1 - Gerente adiciona nome do item
2 - Gerente adiciona descrição do item
3 - Gerente adiciona foto ou vídeo do item
4 - Gerente adiciona categoria do item
5 - Gerente adiciona valor do item
6 - Gerente adiciona estoque do item
7 - Sistema incorpora item ao Cardápio e ao Estoque


Remover Item do Cardápio
Fluxo normal:
1 - Gerente lista itens do Cardápio
2 - Gerente seleciona itens do Cardápio
3 - Sistema remove itens do Cardápio


Editar Item do Cardápio
Fluxo normal:
1 - Gerente lista itens do Cardápio
2 - Gerente seleciona item do Cardápio
3 - Gerente edita os valores do item do Cardápio
4 - Sistema salva novos valores para aquele item do Cardápio


Atualizar Estoque de Item do Cardápio
Fluxo normal:
1 - Gerente lista itens do Cardápio
2 - Gerente seleciona item do Cardápio
3 - Gerente edita o estoque do item do Cardápio
4 - Sistema salva novo valor de estoque para aquele item do Cardápio
Ator 5: Sistema

Verificar Token
Fluxo normal:
1 - Sistema verifica assinatura do token
2 - Sistema verifica data de validade do token
3 - Sistema verifica papel inserido no token
4 - Sistema retorna que token é válido
Extensões:
1a - Se assinatura estiver incorreta, o Sistema notifica que o token contém erro de assinatura
2a - Se data validade estiver fora do prazo, o Sistema notifica que o prazo de validade do token expirou
3a - Se token contiver um papel inválido ou incompatível com o usuário solicitante, o Sistema notifica que o papel é inválido ou incompatível


Gerar Token
Fluxo normal:
1 - Sistema atribui ao token a data de validade fornecida
2 - Sistema atribui o papel fornecido
3 - Sistema assina token com segredo do sistema
4 - Sistema retorna token
Extensões:
1a - Se a data fornecida for inválida, o Sistema solicita nova data
2a - Se o papel fornecido for inválido, o Sistema solicita novo papel


Autenticar Usuário
Fluxo normal:
1 - Usuário fornece Token
2 - Sistema Verifica o Token fornecido
2 - Se usuário fornecer login e senha, então o Sistema Verifica o Token
2 - Usuário fornece senha
3 - Sistema gera token para o usuário
Extensões:
1a - Se usuário não fornecer Token, Sistema deve solicitar login e senha
2a - Se usuário não fornecer Token, Sistema deve Gerar Token usando login e senha fornecidos


Verificar Disponibilidade de Estoque
Fluxo normal:
1 - Sistema verifica disponibilidade de item
2 - Sistema retorna que há disponibilidade
Extensões:
1a - Se não houver disponibilidade, o Sistema notifica o gerente, e retorna que o item está indisponível







